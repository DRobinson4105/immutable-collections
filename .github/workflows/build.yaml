name: build

on: [push]

jobs:
  build-and-test:

    runs-on: ubuntu-latest

    steps:
      - name: "checkout"
        uses: actions/checkout@v1

      - name: "get buildTools"
        uses: ModelingValueGroup/buildTools@master
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: "setup JDK"
        uses: actions/setup-java@v1
        with:
          java-version: 11

      - name: "get dependencies (as in pom)"
        run:  mvn dependency:copy-dependencies -DoutputDirectory=lib

      - name: "..."
        run:  ls -la . lib

      - name: "generate sources"
        run:  ant compile.module.build

      - name: "forced stop"
        run:  exit 99
